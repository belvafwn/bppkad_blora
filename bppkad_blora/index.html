<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BPPKAD Blora - Realisasi APBD 2017-2024</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/supabase-js/2.38.0/umd.min.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">BLORA</div>
                    <div class="header-text">
                        <h1>BPPKAD Kabupaten Blora</h1>
                        <p>Badan Pengelolaan Pendapatan, Keuangan dan Aset Daerah</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <div class="nav-container">
                <div class="nav-menu">
                    <button class="nav-item active" onclick="showSection('dashboard')">Dashboard</button>
                    <button class="nav-item" onclick="showSection('pendapatan')">Pendapatan</button>
                    <button class="nav-item" onclick="showSection('pembelanjaan')">Pembelanjaan</button>
                    <button class="nav-item" onclick="showSection('pembiayaan')">Pembiayaan</button>
                </div>
                <button class="admin-toggle" onclick="toggleAdmin()">Admin Mode</button>
            </div>
        </div>
    </nav>

    <main>
        <div class="container">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <h2 class="section-title">Dashboard Realisasi APBD 2017-2024</h2>
                
                <div class="chart-container">
                    <h3 class="chart-title">Ringkasan Realisasi APBD Per Tahun</h3>
                    <div class="chart-wrapper">
                        <canvas id="dashboardChart"></canvas>
                    </div>
                </div>

                <div class="form-container" id="adminPanel" style="display: none;">
                    <h3 class="form-title">ðŸ”§ Panel Admin - Input Data APBD</h3>
                    <div id="messageContainer"></div>
                    
                    <form id="dataForm">
                        <div class="form-group">
                            <div class="input-group">
                                <label for="tahun">Tahun:</label>
                                <select id="tahun" required>
                                    <option value="">Pilih Tahun</option>
                                    <option value="2017">2017</option>
                                    <option value="2018">2018</option>
                                    <option value="2019">2019</option>
                                    <option value="2020">2020</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2023</option>
                                    <option value="2024">2024</option>
                                </select>
                            </div>
                            
                            <div class="input-group">
                                <label for="kategori">Kategori:</label>
                                <select id="kategori" required>
                                    <option value="">Pilih Kategori</option>
                                    <option value="Pendapatan">Pendapatan</option>
                                    <option value="Pembelanjaan">Pembelanjaan</option>
                                    <option value="Pembiayaan">Pembiayaan</option>
                                </select>
                            </div>
                            
                            <div class="input-group">
                                <label for="subkategori">Subkategori:</label>
                                <input type="text" id="subkategori" placeholder="Ketik subkategori..." required>
                            </div>
                            
                            <div class="input-group">
                                <label for="nilai">Nilai (Rupiah):</label>
                                <input type="number" id="nilai" placeholder="Masukkan nilai dalam rupiah" required>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">ðŸ’¾ Simpan Data</button>
                        <button type="button" class="btn btn-success" onclick="loadAllData()">ðŸ”„ Refresh Data</button>
                    </form>
                </div>
            </section>

            <!-- Pendapatan Section -->
            <section id="pendapatan" class="section">
                <h2 class="section-title">Realisasi Pendapatan Daerah</h2>
                <div class="loading" id="pendapatanLoading">Memuat data pendapatan...</div>
                <div id="pendapatanCharts"></div>
                <div class="data-table" id="pendapatanTable" style="display: none;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Tahun</th>
                                <th>Subkategori</th>
                                <th>Nilai (Rp)</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="pendapatanTableBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Pembelanjaan Section -->
            <section id="pembelanjaan" class="section">
                <h2 class="section-title">Realisasi Pembelanjaan Daerah</h2>
                <div class="loading" id="pembelanjaanLoading">Memuat data pembelanjaan...</div>
                <div id="pembelanjaanCharts"></div>
                <div class="data-table" id="pembelanjaanTable" style="display: none;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Tahun</th>
                                <th>Subkategori</th>
                                <th>Nilai (Rp)</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="pembelanjaanTableBody"></tbody>
                    </table>
                </div>
            </section>

            <!-- Pembiayaan Section -->
            <section id="pembiayaan" class="section">
                <h2 class="section-title">Realisasi Pembiayaan Daerah</h2>
                <div class="loading" id="pembiayaanLoading">Memuat data pembiayaan...</div>
                <div id="pembiayaanCharts"></div>
                <div class="data-table" id="pembiayaanTable" style="display: none;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Tahun</th>
                                <th>Subkategori</th>
                                <th>Nilai (Rp)</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="pembiayaanTableBody"></tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 BPPKAD Kabupaten Blora. Semua hak cipta dilindungi.</p>
            <p>Website Realisasi APBD 2017-2024</p>
        </div>
    </footer>

    <script src="js/script.js"></script>
</body>
</html>